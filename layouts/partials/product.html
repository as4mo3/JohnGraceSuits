<div class="container" id="f1">

	<div class="heading-f1 text-center">

		<div class="h2">

			{{ .Site.Params.suits.title }}

		</div>
	</div>
	<div class="container text-center">
		<div class="row">
			<div class="col-md-12">
				<div>
					{{ .Content }}
          <!-- Trigger/Open The Modal -->
          <button class="pack suits" id="openModal">See Our Suits</button>
				</div>
			</div>
		</div>

	</div>

  <div class="container">


          <div class="row">
		          {{ range $index, $element := .Site.Params.suits.suitImages }}
              {{- if ne (mod $index 2) 1 }}
			         <div class="col-md-6 text-center">
                 <img class="object-fit_scale-down img-fill img-pad pack suits image{{$index}}" id="openModal {{$index}}" src=" {{ $element.image | relURL }}" alt="{{ $element.alt }}">
               </div>
			            {{- else }}
			        <div class="col-md-6 text-center">
                <img class="object-fit_scale-down img-fill img-pad pack suits image{{$index}}" id="openModal {{$index}}" src="{{ $element.image | relURL }}" alt="{{ $element.alt }}">
              </div>
			{{- end }} {{- end}}
          </div>

</div>

<!-- The Modal -->
<div id="productModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <form id="regForm" action="">

      <h1>Register:</h1>

      <!-- One "tab" for each step in the form: -->
      <div class="tab">
        <h2>List 1</h2>
        <div class="selectable" id="suitFitting">
					{{ range $index, $element := .Site.Params.suits.fittingLining }}
					<div class="small-container">
						<img id="{{$index}}" class="image productList" src=" {{$element.image | relURL }}" alt=" {{ $element.alt }} ">
						<p>{{$element.text}}</p>
					</div>
					{{ end }}
					<div class="row">
						<div class="container">
							<div class="caption">
								<p>testing</p>
							</div>
						</div>
					</div>
        </div>
        <div class="selectable" id="construction">
					{{ range $index, $element := .Site.Params.suits.fittingLining }}
					<div class="small-container">
          	<img id="{{$index}}" class="image productList" src=" {{$element.image | relURL }}" alt=" {{ $element.alt }} ">
						<p>{{$element.text}}</p>
					</div>
					{{ end }}
        </div>
				<div class="selectable" id="lining">
					{{ range $index, $element := .Site.Params.suits.fittingLining }}
					<div class="small-container">
          	<img id="{{$index}}" class="image productList" src=" {{$element.image | relURL }}" alt=" {{ $element.alt }} ">
						<p>{{$element.text}}</p>
					</div>
					{{ end }}
        </div>
				<div class="selectable" id="liningColor">
					{{ range $index, $element := .Site.Params.suits.fittingLining }}
					<div class="small-container">
          	<img id="{{$index}}" class="image productList" src=" {{$element.image | relURL }}" alt=" {{ $element.alt }} ">
						<p>{{$element.text}}</p>
					</div>
					{{ end }}
        </div>
        <!-- <p><input placeholder="First name..." oninput="this.className = ''"></p>
        <p><input placeholder="Last name..." oninput="this.className = ''"></p> -->
      </div>

      <div class="tab">
        <h2>List 2</h2>
        <div class="selectable" id="pockets">
					{{ range $index, $element := .Site.Params.suits.fittingLining }}
					<div class="small-container">
          	<img id="{{$index}}" class="image productList" src=" {{$element.image | relURL }}" alt=" {{ $element.alt }} ">
						<p>{{$element.text}}</p>
					</div>
					{{ end }}
        </div>
      </div>

      <div class="tab">Birthday:
        <p><input placeholder="dd" oninput="this.className = ''"></p>
        <p><input placeholder="mm" oninput="this.className = ''"></p>
        <p><input placeholder="yyyy" oninput="this.className = ''"></p>
      </div>

      <div class="tab">Login Info:
        <p><input placeholder="Username..." oninput="this.className = ''"></p>
        <p><input placeholder="Password..." oninput="this.className = ''"></p>
      </div>

      <div style="overflow:auto;">
        <div style="float:right;">
          <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
          <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
        </div>
      </div>

      <!-- Circles which indicates the steps of the form: -->
      <div style="text-align:center;margin-top:40px;">
        <span class="step"></span>
        <span class="step"></span>
        <span class="step"></span>
        <span class="step"></span>
      </div>

    </form>
  </div>

</div>

<script>
// Get the modal
var modal = document.getElementById('productModal');

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// Get the button that opens the modal
var btns = document.querySelectorAll('.pack.suits');

// When the user clicks on the button, open the modal
[].forEach.call(btns, function(el) {
  el.onclick = function() {
      modal.style.display = "block";
      $(this).addClass("img-selected").siblings().removeClass("img-selected");
  }
})

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
    removeSelectedClass();
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
        removeSelectedClass();
    }
}

// Close modal on esc pressed
$(document).keydown(function(event) {
  if (event.keyCode == 27) {
    modal.style.display = "none";
    removeSelectedClass();
  }
});

function removeSelectedClass() {
  // this function removes the img-selected class, used on modal close
  var x = document.getElementsByClassName('img-selected');
  for (var i = 0; i < x.length; i++) {
    $(x[i]).removeClass("img-selected");
  }
}

var currentTab = 0; // Current tab is set to be the first tab (0)
showTab(currentTab); // Display the current tab

function showTab(n) {
  // This function will display the specified tab of the form ...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";
  // ... and fix the Previous/Next buttons:
  if (n == 0) {
    document.getElementById("prevBtn").style.display = "none";
  } else {
    document.getElementById("prevBtn").style.display = "inline";
  }
  if (n == (x.length - 1)) {
    document.getElementById("nextBtn").innerHTML = "Submit";
  } else {
    document.getElementById("nextBtn").innerHTML = "Next";
  }
  // ... and run a function that displays the correct step indicator:
  fixStepIndicator(n)
}

function nextPrev(n) {
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab");
  // Exit the function if any field in the current tab is invalid:
  if (n == 1 && (!validateForm() || !validateImages())) return false;
  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  currentTab = currentTab + n;
  // if you have reached the end of the form... :
  if (currentTab >= x.length) {
    //...the form gets submitted:
    document.getElementById("regForm").submit();
    return false;
  }
  // Otherwise, display the correct tab:
  showTab(currentTab);
}

function validateForm() {
  // This function deals with validation of the form fields
  var x, y, i, valid = true;
  x = document.getElementsByClassName("tab");
  y = x[currentTab].getElementsByTagName("input");
  // A loop that checks every input field in the current tab:
  for (i = 0; i < y.length; i++) {
    // If a field is empty...
    if (y[i].value == "") {
      // add an "invalid" class to the field:
      y[i].className += " invalid";
      // and set the current valid status to false:
      valid = false;
    }
  }
  // If the valid status is true, mark the step as finished and valid:
  if (valid) {
    document.getElementsByClassName("step")[currentTab].className += " finish";
  }
  return valid; // return the valid status
}

function validateImages() {
  // This function makes it mandatory to select at least one image
  var x, y, z, valid = true;
  x = document.getElementsByClassName('tab');
	x = x[currentTab].getElementsByClassName('ui-selected');
	// y = document.getElementsByClassName('tab')
	// y = x[currentTab].getElementsByTagName("input");
	z = document.getElementsByClassName('tab');
	z = z[currentTab].children;
  // y = x.getElementsByClassName("image");
  if (x.length != (z.length - 1)) {
    // add an "invalid" class to the field:
    // y[i].className += " invalid";
    // and set the current valid status to false:
    valid = false;
  }
  if (valid) {
    document.getElementsByClassName("step")[currentTab].className += " finish";
  }
  return valid; // return the valid status
}

function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class to the current step:
  x[n].className += " active";
}

$(function() {
  var productSelectedList = {};
  $(".selectable img").click(function() {
		// var x = $(".ui-selected");
		// for (var i = 0; i < x.length; i++) {
		// 	x[i].removeClass('ui-selected');
		// }
		// $(this).addClass("ui-selected");
    // $(this).addClass("ui-selected").siblings().removeClass("ui-selected");
		// $(this).getElementsByClassName('image').addClass("ui-selected").siblings().removeClass("ui-selected");
		var x, y;
		x = $(this)[0].parentNode.parentNode;
		y = $(x).find(".ui-selected");
		for (var i = 0; i < y.length; i++) {
			$(y[i]).removeClass("ui-selected");
		}
		$(this).addClass("ui-selected");
    if ($(this).hasClass("ui-selected")) {
      var x = document.getElementsByClassName('ui-selected');
      var y = document.getElementsByClassName('img-selected');
      y = y[0].id.toString().split(' ')[1];
      productSelectedList["suit"] = parseInt(y);
			for (var i = 0; i < x.length; i++) {
				productSelectedList[x[i].parentElement.parentElement.id] = parseInt(x[i].id);
			}
      console.log("List");
      console.log(productSelectedList);
			// textSwitcher();
			console.log("currentTab " + currentTab);
    };
  });
});

// function textSwitcher() {
// 	// this function switches the text inside of caption divs based on which image clicked on
// 	var x, y;
// 	x = document.getElementsByClassName('tab');
// 	y = x[currentTab].getElementsByClassName('ui-selected');
// 	switch (y.length > 0) {
// 		case currentTab = 0:
// 			switch (y.length > 0) {
// 				case y.id = 0:
// 					y[0].nextSibling.innerHTML = "testing1";
// 					break;
// 				default:
//
// 			}
// 			break;
// 		case currentTab = 1:
//
// 			break;
// 		case currentTab = 2:
//
// 			break;
// 		case currentTab = 3:
//
// 			break;
// 		default:
//
// 	}
// }
//
// </script>
